apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: manar-app
  namespace: argocd
spec:
  project: default
  
  source:
    repoURL: https://github.com/manaradel3812-creator/nti-cloud-final-project.git
    targetRevision: main
    path: charts/hello-app
    helm:
      valueFiles:
        - values.yaml
  
  destination:
    server: https://kubernetes.default.svc
    namespace: default
  
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
      allowEmpty: false
    syncOptions:
      - CreateNamespace=true
    retry:
      limit: 5
      backoff:
        duration: 5s
        factor: 2
        maxDuration: 3m
```

---

## ğŸ¯ ÙƒÙŠÙ ÙŠØ´ØªØºÙ„ Ø§Ù„Ø¢Ù†:

### **Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 1: ØªØ´ØºÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ** 
```
1. ØªØ¹Ù…Ù„ÙŠ push Ø¹Ù„Ù‰ main
2. CI ÙŠØ´ØªØºÙ„ â†’ ÙŠØ¨Ù†ÙŠ Ø§Ù„ØµÙˆØ±Ø© ÙˆÙŠØ±ÙØ¹Ù‡Ø§ ECR
3. CI ÙŠÙ†Ø¬Ø­ â†’ ÙŠØ±ÙØ¹ artifact ÙÙŠÙ‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
4. CD ÙŠØ´ØªØºÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ CI
5. Trivy ÙŠÙØ­Øµ Ø§Ù„ØµÙˆØ±Ø©
6. ÙŠØ­Ø¯Ù‘Ø« GitOps repo
7. ArgoCD ÙŠÙƒØªØ´Ù Ø§Ù„ØªØºÙŠÙŠØ± ÙˆÙŠØ¹Ù…Ù„ sync ØªÙ„Ù‚Ø§Ø¦ÙŠ
```

### **Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 2: ØªØ´ØºÙŠÙ„ ÙŠØ¯ÙˆÙŠ**
```
1. ØªØ±ÙˆØ­ÙŠ Actions â†’ CD Pipeline â†’ Run workflow
2. ØªØ®ØªØ§Ø±ÙŠ manual mode
3. ØªØ­Ø·ÙŠ image tag Ù…Ø¹ÙŠÙ† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
4. Trivy ÙŠÙØ­Øµ
5. ÙŠØ·Ù„Ø¹ issue Ù„Ù„Ù…ÙˆØ§ÙÙ‚Ø©
6. Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© â†’ ÙŠÙƒÙ…Ù„ Ø§Ù„Ù†Ø´Ø±
